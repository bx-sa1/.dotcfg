#!/bin/bash

source ~/.cache/wal/colors.sh
xsetroot -cursor_name left_ptr
if [[ "$1" -eq 0 ]]; then
    sxhkd &
    picom -b
fi

########
#CONFIG#
########
bspc monitor -d home web dev music games

bspc config border_width 1
bspc config window_gap 5
bspc config split_ratio 0.5

bspc config borderless_monocle true
bspc config gapless_monocle true

bspc config focus_follows_pointer true
bspc config ignore_ewmh_focus false

bspc config normal_border_color "$color7"
bspc config active_border_color "$color8"
bspc config focused_border_color "$color9"
bspc config presel_feedback_color "$color10"

bspc desktop games -l monocle

#######
#RULES#
#######

declare -A shifts
shifts[firefox]="web"
shifts[steam]="games"
shifts[Lutris]="games"
shifts[Discord]="games"
shifts[REAPER]="music"
shifts[com.bitwig.BitwigStudio]="music"
shifts[Qtractor]="music"
shifts[Spotify]="music"
for key in "${!shifts[@]}"; do
    bspc rule -a "$key" desktop="${shifts[$key]}"
done 

bspc rule -a Pcmanfm state=floating
bspc rule -a Alacritty state=floating
bspc rule -a Zenity state=floating
bspc rule -a "steam:*:Friends List" state=floating

bspc rule -a firefox:Toolkit:Picture-in-Picture state=floating sticky=on
